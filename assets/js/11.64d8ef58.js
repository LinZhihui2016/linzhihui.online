(window.webpackJsonp=window.webpackJsonp||[]).push([[11],{369:function(e,v,t){"use strict";t.r(v);var _=t(42),a=Object(_.a)({},(function(){var e=this,v=e.$createElement,t=e._self._c||v;return t("ContentSlotsDistributor",{attrs:{"slot-key":e.$parent.slotKey}},[t("blockquote",[t("p",[e._v("vue+vue-router+vuex实现页面页签缓存功能。")])]),e._v(" "),t("h2",{attrs:{id:"概述"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#概述"}},[e._v("#")]),e._v(" 概述")]),e._v(" "),t("h3",{attrs:{id:"任务指标"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#任务指标"}},[e._v("#")]),e._v(" 任务指标")]),e._v(" "),t("blockquote",[t("p",[e._v("产品经理下了任务：“我要页签，缓存住的那种，搞一个”")])]),e._v(" "),t("p",[e._v("页签页签，怎么搞呢。想了想，上keepAlive吧。")]),e._v(" "),t("h3",{attrs:{id:"分析需求"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#分析需求"}},[e._v("#")]),e._v(" 分析需求")]),e._v(" "),t("ul",[t("li",[e._v("路由跳转的时候，如果路由在页签中，则跳到对应的页签中，如果不存在，则开启新页签，并且排在最后一个；")]),e._v(" "),t("li",[e._v("页签上有销毁按钮，点击销毁的时候关闭页签，并且要销毁缓存；")]),e._v(" "),t("li",[e._v("设置最大页签数，当页签达到最大时，最早的页签销毁掉；")]),e._v(" "),t("li",[e._v("首页要一直在第一个页签，并且不能销毁。")])]),e._v(" "),t("h2",{attrs:{id:"vue全家桶搞起来"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#vue全家桶搞起来"}},[e._v("#")]),e._v(" vue全家桶搞起来")]),e._v(" "),t("h3",{attrs:{id:"页面布局"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#页面布局"}},[e._v("#")]),e._v(" 页面布局")]),e._v(" "),t("p",[e._v("左侧Aside作为导航栏，右侧分为头部Header和本体Main，头部固定在上方，左侧用于页签，右侧用于各种下拉功能区。滚动条应当在本体Main中。")]),e._v(" "),t("h3",{attrs:{id:"keepalive"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#keepalive"}},[e._v("#")]),e._v(" keepAlive")]),e._v(" "),t("blockquote",[t("p",[t("code",[e._v("<keep-alive>")]),e._v(" 包裹动态组件时，会缓存不活动的组件实例，而不是销毁它们。\n"),t("code",[e._v("include")]),e._v(" 和 "),t("code",[e._v("exclude")]),e._v(" 属性允许组件有条件地缓存。二者都可以用逗号分隔字符串、正则表达式或一个数组来表示。")])]),e._v(" "),t("p",[e._v("通过之前对"),t("code",[e._v("keep-alive")]),e._v("的使用发现，当"),t("code",[e._v("include")]),e._v("数组内的组件从"),t("code",[e._v("include")]),e._v("里删除时，vue会销毁其实例，所以这里用"),t("code",[e._v("vuex")]),e._v("存储"),t("code",[e._v("include")]),e._v("数组，来操控对页签的增删。")]),e._v(" "),t("h3",{attrs:{id:"vuex储存include"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#vuex储存include"}},[e._v("#")]),e._v(" "),t("code",[e._v("vuex")]),e._v("储存"),t("code",[e._v("include")])]),e._v(" "),t("p",[e._v("在"),t("code",[e._v("state")]),e._v("里存储一个"),t("code",[e._v("include")]),e._v(",然后分别准备添加和删除的"),t("code",[e._v("mutations")]),e._v("即可。")]),e._v(" "),t("h3",{attrs:{id:"vue-router"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#vue-router"}},[e._v("#")]),e._v(" "),t("code",[e._v("vue-router")])]),e._v(" "),t("p",[e._v("需要在router的路由守卫中判断"),t("code",[e._v("to.meta")]),e._v("里是否需要将新页面缓存即可（部分页面不应该缓存，例如登陆页面）。")])])}),[],!1,null,null,null);v.default=a.exports}}]);